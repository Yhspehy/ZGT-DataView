import{d as Je,e as ke,o as ge,c as fe,F as pa,i as ya,s as Qe,b as j,r as ma}from"./index-3906dfe0.js";import{_ as ea,P as ba,q as P,ar as Ye,as as Ie,at as aa,t as La,au as $e,av as xa,w as Sa,aw as Xe,v as Te,ax as _a,ay as Ma,az as oe,T as Ta,B as ze,aA as Ue,aB as Aa,U as Ae,aC as V,aD as Da,G as De,aE as wa,aF as ta,aG as Ca,z as ee,aH as Pa,aI as Ia,I as ae,W as qe,aJ as de,aK as Na,E as me,aL as Ra,an as Oa,y as he,aM as ra,o as Ea,aN as Ba,aO as Ne,ac as Va,L as z,aP as Ga,aQ as ka,aR as Ya,aS as $a,aT as Xa,aU as za,S as na,aV as Ua,ae as qa,aW as Fa,a8 as ja,aX as Fe,aq as ia,aY as Ha,aZ as Wa,a_ as Za,a9 as Ka,a$ as Ja}from"./installCanvasRenderer-219d180f.js";const Qa={class:"border-box-1"},et=["fill"],at=["values"],tt=["fill"],rt=["values"],nt=["fill"],it=["values"],st=Je({__name:"BorderBox1",setup(n){const r=ke(["left-top","right-top","left-bottom","right-bottom"]),a=ke(["#4fd2dd","#235fa7"]);return(e,t)=>(ge(),fe("div",Qa,[(ge(!0),fe(pa,null,ya(r.value,o=>(ge(),fe("svg",{width:"150px",height:"150px",key:o,class:Qe(`${o} border`)},[j("polygon",{fill:a.value[0],points:"6,66 6,18 12,12 18,12 24,6 27,6 30,9 36,9 39,6 84,6 81,9 75,9 73.2,7 40.8,7 37.8,10.2 24,10.2 12,21 12,24 9,27 9,51 7.8,54 7.8,63"},[j("animate",{attributeName:"fill",values:`${a.value[0]};${a.value[1]};${a.value[0]}`,dur:"0.5s",begin:"0s",repeatCount:"indefinite"},null,8,at)],8,et),j("polygon",{fill:a.value[1],points:"27.599999999999998,4.8 38.4,4.8 35.4,7.8 30.599999999999998,7.8"},[j("animate",{attributeName:"fill",values:`${a.value[1]};${a.value[0]};${a.value[1]}`,dur:"0.5s",begin:"0s",repeatCount:"indefinite"},null,8,rt)],8,tt),j("polygon",{fill:a.value[0],points:"9,54 9,63 7.199999999999999,66 7.199999999999999,75 7.8,78 7.8,110 8.4,110 8.4,66 9.6,66 9.6,54"},[j("animate",{attributeName:"fill",values:`${a.value[0]};${a.value[1]};transparent`,dur:"1s",begin:"0s",repeatCount:"indefinite"},null,8,it)],8,nt)],2))),128)),ma(e.$slots,"default",{},void 0,!0)]))}});const Gt=ea(st,[["__scopeId","data-v-7ab22495"]]);const ot={name:"ScrollTable"},lt=Je({...ot,props:{position:{default:"bottom"}},setup(n){return(r,a)=>(ge(),fe("div",{class:Qe(["divide",n.position])},null,2))}});const kt=ea(lt,[["__scopeId","data-v-769b3ec7"]]);var Q=Math.PI*2,X=ba.CMD,vt=["top","right","bottom","left"];function ct(n,r,a,e,t){var o=a.width,i=a.height;switch(n){case"top":e.set(a.x+o/2,a.y-r),t.set(0,-1);break;case"bottom":e.set(a.x+o/2,a.y+i+r),t.set(0,1);break;case"left":e.set(a.x-r,a.y+i/2),t.set(-1,0);break;case"right":e.set(a.x+o+r,a.y+i/2),t.set(1,0);break}}function ut(n,r,a,e,t,o,i,l,c){i-=n,l-=r;var u=Math.sqrt(i*i+l*l);i/=u,l/=u;var s=i*a+n,d=l*a+r;if(Math.abs(e-t)%Q<1e-4)return c[0]=s,c[1]=d,u-a;if(o){var f=e;e=oe(t),t=oe(f)}else e=oe(e),t=oe(t);e>t&&(t+=Q);var v=Math.atan2(l,i);if(v<0&&(v+=Q),v>=e&&v<=t||v+Q>=e&&v+Q<=t)return c[0]=s,c[1]=d,u-a;var g=a*Math.cos(e)+n,h=a*Math.sin(e)+r,p=a*Math.cos(t)+n,y=a*Math.sin(t)+r,m=(g-i)*(g-i)+(h-l)*(h-l),b=(p-i)*(p-i)+(y-l)*(y-l);return m<b?(c[0]=g,c[1]=h,Math.sqrt(m)):(c[0]=p,c[1]=y,Math.sqrt(b))}function pe(n,r,a,e,t,o,i,l){var c=t-n,u=o-r,s=a-n,d=e-r,f=Math.sqrt(s*s+d*d);s/=f,d/=f;var v=c*s+u*d,g=v/f;l&&(g=Math.min(Math.max(g,0),1)),g*=f;var h=i[0]=n+g*s,p=i[1]=r+g*d;return Math.sqrt((h-t)*(h-t)+(p-o)*(p-o))}function sa(n,r,a,e,t,o,i){a<0&&(n=n+a,a=-a),e<0&&(r=r+e,e=-e);var l=n+a,c=r+e,u=i[0]=Math.min(Math.max(t,n),l),s=i[1]=Math.min(Math.max(o,r),c);return Math.sqrt((u-t)*(u-t)+(s-o)*(s-o))}var B=[];function gt(n,r,a){var e=sa(r.x,r.y,r.width,r.height,n.x,n.y,B);return a.set(B[0],B[1]),e}function ft(n,r,a){for(var e=0,t=0,o=0,i=0,l,c,u=1/0,s=r.data,d=n.x,f=n.y,v=0;v<s.length;){var g=s[v++];v===1&&(e=s[v],t=s[v+1],o=e,i=t);var h=u;switch(g){case X.M:o=s[v++],i=s[v++],e=o,t=i;break;case X.L:h=pe(e,t,s[v],s[v+1],d,f,B,!0),e=s[v++],t=s[v++];break;case X.C:h=Ma(e,t,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],d,f,B),e=s[v++],t=s[v++];break;case X.Q:h=_a(e,t,s[v++],s[v++],s[v],s[v+1],d,f,B),e=s[v++],t=s[v++];break;case X.A:var p=s[v++],y=s[v++],m=s[v++],b=s[v++],_=s[v++],S=s[v++];v+=1;var D=!!(1-s[v++]);l=Math.cos(_)*m+p,c=Math.sin(_)*b+y,v<=1&&(o=l,i=c);var T=(d-p)*b/m+p;h=ut(p,y,b,_,_+S,D,T,f,B),e=Math.cos(_+S)*m+p,t=Math.sin(_+S)*b+y;break;case X.R:o=e=s[v++],i=t=s[v++];var L=s[v++],M=s[v++];h=sa(o,i,L,M,d,f,B);break;case X.Z:h=pe(e,t,o,i,d,f,B,!0),e=o,t=i;break}h<u&&(u=h,a.set(B[0],B[1]))}return u}var G=new P,x=new P,A=new P,Y=new P,k=new P;function je(n,r){if(n){var a=n.getTextGuideLine(),e=n.getTextContent();if(e&&a){var t=n.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],i=t.candidates||vt,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var c=1/0,u=t.anchor,s=n.getComputedTransform(),d=s&&xa([],s),f=r.get("length2")||0;u&&A.copy(u);for(var v=0;v<i.length;v++){var g=i[v];ct(g,0,l,G,Y),P.scaleAndAdd(x,G,Y,f),x.transform(d);var h=n.getBoundingRect(),p=u?u.distance(x):n instanceof Sa?ft(x,n.path,A):gt(x,h,A);p<c&&(c=p,x.transform(s),A.transform(s),A.toArray(o[0]),x.toArray(o[1]),G.toArray(o[2]))}oa(o,r.get("minTurnAngle")),a.setShape({points:o})}}}var ye=[],I=new P;function oa(n,r){if(r<=180&&r>0){r=r/180*Math.PI,G.fromArray(n[0]),x.fromArray(n[1]),A.fromArray(n[2]),P.sub(Y,G,x),P.sub(k,A,x);var a=Y.len(),e=k.len();if(!(a<.001||e<.001)){Y.scale(1/a),k.scale(1/e);var t=Y.dot(k),o=Math.cos(r);if(o<t){var i=pe(x.x,x.y,A.x,A.y,G.x,G.y,ye,!1);I.fromArray(ye),I.scaleAndAdd(k,i/Math.tan(Math.PI-r));var l=A.x!==x.x?(I.x-x.x)/(A.x-x.x):(I.y-x.y)/(A.y-x.y);if(isNaN(l))return;l<0?P.copy(I,x):l>1&&P.copy(I,A),I.toArray(n[1])}}}}function dt(n,r,a){if(a<=180&&a>0){a=a/180*Math.PI,G.fromArray(n[0]),x.fromArray(n[1]),A.fromArray(n[2]),P.sub(Y,x,G),P.sub(k,A,x);var e=Y.len(),t=k.len();if(!(e<.001||t<.001)){Y.scale(1/e),k.scale(1/t);var o=Y.dot(r),i=Math.cos(a);if(o<i){var l=pe(x.x,x.y,A.x,A.y,G.x,G.y,ye,!1);I.fromArray(ye);var c=Math.PI/2,u=Math.acos(k.dot(r)),s=c+u-a;if(s>=c)P.copy(I,A);else{I.scaleAndAdd(k,l/Math.tan(Math.PI/2-s));var d=A.x!==x.x?(I.x-x.x)/(A.x-x.x):(I.y-x.y)/(A.y-x.y);if(isNaN(d))return;d<0?P.copy(I,x):d>1&&P.copy(I,A)}I.toArray(n[1])}}}}function He(n,r,a,e){var t=a==="normal",o=t?n:n.ensureState(a);o.ignore=r;var i=e.get("smooth");i&&i===!0&&(i=.3),o.shape=o.shape||{},i>0&&(o.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();t?n.useStyle(l):o.style=l}function ht(n,r){var a=r.smooth,e=r.points;if(e)if(n.moveTo(e[0][0],e[0][1]),a>0&&e.length>=3){var t=Xe(e[0],e[1]),o=Xe(e[1],e[2]);if(!t||!o){n.lineTo(e[1][0],e[1][1]),n.lineTo(e[2][0],e[2][1]);return}var i=Math.min(t,o)*a,l=Te([],e[1],e[0],i/t),c=Te([],e[1],e[2],i/o),u=Te([],l,c,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),n.bezierCurveTo(c[0],c[1],c[0],c[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)n.lineTo(e[s][0],e[s][1])}function la(n,r,a){var e=n.getTextGuideLine(),t=n.getTextContent();if(!t){e&&n.removeTextGuideLine();return}for(var o=r.normal,i=o.get("show"),l=t.ignore,c=0;c<Ye.length;c++){var u=Ye[c],s=r[u],d=u==="normal";if(s){var f=s.get("show"),v=d?l:Ie(t.states[u]&&t.states[u].ignore,l);if(v||!Ie(f,i)){var g=d?e:e&&e.states[u];g&&(g.ignore=!0);continue}e||(e=new aa,n.setTextGuideLine(e),!d&&(l||!i)&&He(e,!0,"normal",r.normal),n.stateProxy&&(e.stateProxy=n.stateProxy)),He(e,!1,u,s)}}if(e){La(e.style,a),e.style.fill=null;var h=o.get("showAbove"),p=n.textGuideLineConfig=n.textGuideLineConfig||{};p.showAbove=h||!1,e.buildPath=ht}}function va(n,r){r=r||"labelLine";for(var a={normal:n.getModel(r)},e=0;e<$e.length;e++){var t=$e[e];a[t]=n.getModel([t,r])}return a}function pt(n){if(n){for(var r=[],a=0;a<n.length;a++)r.push(n[a].slice());return r}}function yt(n,r){var a=n.label,e=r&&r.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:a.style.align,verticalAlign:a.style.verticalAlign,labelLinePoints:pt(e&&e.shape.points)}}var We=["align","verticalAlign","width","height","fontSize"],R=new Ta,we=me(),mt=me();function le(n,r,a){for(var e=0;e<a.length;e++){var t=a[e];r[t]!=null&&(n[t]=r[t])}}var ve=["x","y","rotation"],bt=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(r,a,e,t,o){var i=t.style,l=t.__hostTarget,c=l.textConfig||{},u=t.getComputedTransform(),s=t.getBoundingRect().plain();ze.applyTransform(s,s,u),u?R.setLocalTransform(u):(R.x=R.y=R.rotation=R.originX=R.originY=0,R.scaleX=R.scaleY=1);var d=t.__hostTarget,f;if(d){f=d.getBoundingRect().plain();var v=d.getComputedTransform();ze.applyTransform(f,f,v)}var g=f&&d.getTextGuideLine();this._labelList.push({label:t,labelLine:g,seriesModel:e,dataIndex:r,dataType:a,layoutOption:o,computedLayoutOption:null,rect:s,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:t.ignore,labelGuideIgnore:g&&g.ignore,x:R.x,y:R.y,scaleX:R.scaleX,scaleY:R.scaleY,rotation:R.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:t.cursor,attachedPos:c.position,attachedRot:c.rotation}})},n.prototype.addLabelsOfSeries=function(r){var a=this;this._chartViewList.push(r);var e=r.__model,t=e.get("labelLayout");(Ue(t)||Aa(t).length)&&r.group.traverse(function(o){if(o.ignore)return!0;var i=o.getTextContent(),l=Ae(o);i&&!i.disableLabelLayout&&a._addLabel(l.dataIndex,l.dataType,e,i,t)})},n.prototype.updateLayoutConfig=function(r){var a=r.getWidth(),e=r.getHeight();function t(b,_){return function(){je(b,_)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],l=i.label,c=l.__hostTarget,u=i.defaultAttr,s=void 0;Ue(i.layoutOption)?s=i.layoutOption(yt(i,c)):s=i.layoutOption,s=s||{},i.computedLayoutOption=s;var d=Math.PI/180;c&&c.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:u.attachedPos,rotation:s.rotate!=null?s.rotate*d:u.attachedRot,offset:[s.dx||0,s.dy||0]});var f=!1;if(s.x!=null?(l.x=V(s.x,a),l.setStyle("x",0),f=!0):(l.x=u.x,l.setStyle("x",u.style.x)),s.y!=null?(l.y=V(s.y,e),l.setStyle("y",0),f=!0):(l.y=u.y,l.setStyle("y",u.style.y)),s.labelLinePoints){var v=c.getTextGuideLine();v&&(v.setShape({points:s.labelLinePoints}),f=!1)}var g=we(l);g.needsUpdateLabelLine=f,l.rotation=s.rotate!=null?s.rotate*d:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var h=0;h<We.length;h++){var p=We[h];l.setStyle(p,s[p]!=null?s[p]:u.style[p])}if(s.draggable){if(l.draggable=!0,l.cursor="move",c){var y=i.seriesModel;if(i.dataIndex!=null){var m=i.seriesModel.getData(i.dataType);y=m.getItemModel(i.dataIndex)}l.on("drag",t(c,y.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},n.prototype.layout=function(r){var a=r.getWidth(),e=r.getHeight(),t=Da(this._labelList),o=De(t,function(c){return c.layoutOption.moveOverlap==="shiftX"}),i=De(t,function(c){return c.layoutOption.moveOverlap==="shiftY"});wa(o,0,a),ta(i,0,e);var l=De(t,function(c){return c.layoutOption.hideOverlap});Ca(l)},n.prototype.processLabelsOverall=function(){var r=this;ee(this._chartViewList,function(a){var e=a.__model,t=a.ignoreLabelLineUpdate,o=e.isAnimationEnabled();a.group.traverse(function(i){if(i.ignore&&!i.forceLabelAnimation)return!0;var l=!t,c=i.getTextContent();!l&&c&&(l=we(c).needsUpdateLabelLine),l&&r._updateLabelLine(i,e),o&&r._animateLabels(i,e)})})},n.prototype._updateLabelLine=function(r,a){var e=r.getTextContent(),t=Ae(r),o=t.dataIndex;if(e&&o!=null){var i=a.getData(t.dataType),l=i.getItemModel(o),c={},u=i.getItemVisual(o,"style"),s=i.getVisual("drawType");c.stroke=u[s];var d=l.getModel("labelLine");la(r,va(l),c),je(r,d)}},n.prototype._animateLabels=function(r,a){var e=r.getTextContent(),t=r.getTextGuideLine();if(e&&(r.forceLabelAnimation||!e.ignore&&!e.invisible&&!r.disableLabelAnimation&&!Pa(r))){var o=we(e),i=o.oldLayout,l=Ae(r),c=l.dataIndex,u={x:e.x,y:e.y,rotation:e.rotation},s=a.getData(l.dataType);if(i){e.attr(i);var f=r.prevStates;f&&(qe(f,"select")>=0&&e.attr(o.oldLayoutSelect),qe(f,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),de(e,u,a,c)}else if(e.attr(u),!Ia(e).valueAnimation){var d=Ie(e.style.opacity,1);e.style.opacity=0,ae(e,{style:{opacity:d}},a,c)}if(o.oldLayout=u,e.states.select){var v=o.oldLayoutSelect={};le(v,u,ve),le(v,e.states.select,ve)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};le(g,u,ve),le(g,e.states.emphasis,ve)}Na(e,c,s,a,a)}if(t&&!t.ignore&&!t.invisible){var o=mt(t),i=o.oldLayout,h={points:t.shape.points};i?(t.attr({shape:i}),de(t,{shape:h},a)):(t.setShape(h),t.style.strokePercent=0,ae(t,{style:{strokePercent:1}},a)),o.oldLayout=h}},n}();const Lt=bt;var Ce=me();function Yt(n){n.registerUpdateLifecycle("series:beforeupdate",function(r,a,e){var t=Ce(a).labelManager;t||(t=Ce(a).labelManager=new Lt),t.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(r,a,e){var t=Ce(a).labelManager;e.updatedSeries.forEach(function(o){t.addLabelsOfSeries(a.getViewOfSeriesModel(o))}),t.updateLayoutConfig(a),t.layout(a),t.processLabelsOverall()})}var ce=Math.PI*2,Ze=Math.PI/180;function ca(n,r){return Oa(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function ua(n,r){var a=ca(n,r),e=n.get("center"),t=n.get("radius");he(t)||(t=[0,t]);var o=V(a.width,r.getWidth()),i=V(a.height,r.getHeight()),l=Math.min(o,i),c=V(t[0],l/2),u=V(t[1],l/2),s,d,f=n.coordinateSystem;if(f){var v=f.dataToPoint(e);s=v[0]||0,d=v[1]||0}else he(e)||(e=[e,e]),s=V(e[0],o)+a.x,d=V(e[1],i)+a.y;return{cx:s,cy:d,r0:c,r:u}}function xt(n,r,a){r.eachSeriesByType(n,function(e){var t=e.getData(),o=t.mapDimension("value"),i=ca(e,a),l=ua(e,a),c=l.cx,u=l.cy,s=l.r,d=l.r0,f=-e.get("startAngle")*Ze,v=e.get("minAngle")*Ze,g=0;t.each(o,function(C){!isNaN(C)&&g++});var h=t.getSum(o),p=Math.PI/(h||g)*2,y=e.get("clockwise"),m=e.get("roseType"),b=e.get("stillShowZeroSum"),_=t.getDataExtent(o);_[0]=0;var S=ce,D=0,T=f,L=y?1:-1;if(t.setLayout({viewRect:i,r:s}),t.each(o,function(C,O){var w;if(isNaN(C)){t.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:c,cy:u,r0:d,r:m?NaN:s});return}m!=="area"?w=h===0&&b?p:C*p:w=ce/g,w<v?(w=v,S-=v):D+=C;var N=T+L*w;t.setItemLayout(O,{angle:w,startAngle:T,endAngle:N,clockwise:y,cx:c,cy:u,r0:d,r:m?Ra(C,_,[d,s]):s}),T=N}),S<ce&&g)if(S<=.001){var M=ce/g;t.each(o,function(C,O){if(!isNaN(C)){var w=t.getItemLayout(O);w.angle=M,w.startAngle=f+L*O*M,w.endAngle=f+L*(O+1)*M}})}else p=S/D,T=f,t.each(o,function(C,O){if(!isNaN(C)){var w=t.getItemLayout(O),N=w.angle===v?v:C*p;w.startAngle=T,w.endAngle=T+L*N,T+=L*N}})})}function St(n){return{seriesType:n,reset:function(r,a){var e=a.findComponents({mainType:"legend"});if(!(!e||!e.length)){var t=r.getData();t.filterSelf(function(o){for(var i=t.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var _t=Math.PI/180;function Ke(n,r,a,e,t,o,i,l,c,u){if(n.length<2)return;function s(h){for(var p=h.rB,y=p*p,m=0;m<h.list.length;m++){var b=h.list[m],_=Math.abs(b.label.y-a),S=e+b.len,D=S*S,T=Math.sqrt((1-Math.abs(_*_/y))*D),L=r+(T+b.len2)*t,M=L-b.label.x,C=b.targetTextWidth-M*t;ga(b,C,!0),b.label.x=L}}function d(h){for(var p={list:[],maxY:0},y={list:[],maxY:0},m=0;m<h.length;m++)if(h[m].labelAlignTo==="none"){var b=h[m],_=b.label.y>a?y:p,S=Math.abs(b.label.y-a);if(S>=_.maxY){var D=b.label.x-r-b.len2*t,T=e+b.len,L=Math.abs(D)<T?Math.sqrt(S*S/(1-D*D/T/T)):T;_.rB=L,_.maxY=S}_.list.push(b)}s(p),s(y)}for(var f=n.length,v=0;v<f;v++)if(n[v].position==="outer"&&n[v].labelAlignTo==="labelLine"){var g=n[v].label.x-u;n[v].linePoints[1][0]+=g,n[v].label.x=u}ta(n,c,c+i)&&d(n)}function Mt(n,r,a,e,t,o,i,l){for(var c=[],u=[],s=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<n.length;f++){var v=n[f].label;Pe(n[f])||(v.x<r?(s=Math.min(s,v.x),c.push(n[f])):(d=Math.max(d,v.x),u.push(n[f])))}for(var f=0;f<n.length;f++){var g=n[f];if(!Pe(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var v=g.label,h=g.linePoints,p=void 0;g.labelAlignTo==="edge"?v.x<r?p=h[2][0]-g.labelDistance-i-g.edgeDistance:p=i+t-g.edgeDistance-h[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?v.x<r?p=s-i-g.bleedMargin:p=i+t-d-g.bleedMargin:v.x<r?p=v.x-i-g.bleedMargin:p=i+t-v.x-g.bleedMargin,g.targetTextWidth=p,ga(g,p)}}Ke(u,r,a,e,1,t,o,i,l,d),Ke(c,r,a,e,-1,t,o,i,l,s);for(var f=0;f<n.length;f++){var g=n[f];if(!Pe(g)&&g.linePoints){var v=g.label,h=g.linePoints,y=g.labelAlignTo==="edge",m=v.style.padding,b=m?m[1]+m[3]:0,_=v.style.backgroundColor?0:b,S=g.rect.width+_,D=h[1][0]-h[2][0];y?v.x<r?h[2][0]=i+g.edgeDistance+S+g.labelDistance:h[2][0]=i+t-g.edgeDistance-S-g.labelDistance:(v.x<r?h[2][0]=v.x+g.labelDistance:h[2][0]=v.x-g.labelDistance,h[1][0]=h[2][0]+D),h[1][1]=h[2][1]=v.y}}}function ga(n,r,a){if(a===void 0&&(a=!1),n.labelStyleWidth==null){var e=n.label,t=e.style,o=n.rect,i=t.backgroundColor,l=t.padding,c=l?l[1]+l[3]:0,u=t.overflow,s=o.width+(i?0:c);if(r<s||a){var d=o.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",r-c);var f=e.getBoundingRect();e.setStyle("width",Math.ceil(f.width)),e.setStyle("backgroundColor",i)}else{var v=r-c,g=r<s?v:a?v>n.unconstrainedWidth?null:v:null;e.setStyle("width",g)}var h=e.getBoundingRect();o.width=h.width;var p=(e.style.margin||0)+2.1;o.height=h.height+p,o.y-=(o.height-d)/2}}}function Pe(n){return n.position==="center"}function Tt(n){var r=n.getData(),a=[],e,t,o=!1,i=(n.get("minShowLabelAngle")||0)*_t,l=r.getLayout("viewRect"),c=r.getLayout("r"),u=l.width,s=l.x,d=l.y,f=l.height;function v(D){D.ignore=!0}function g(D){if(!D.ignore)return!0;for(var T in D.states)if(D.states[T].ignore===!1)return!0;return!1}r.each(function(D){var T=r.getItemGraphicEl(D),L=T.shape,M=T.getTextContent(),C=T.getTextGuideLine(),O=r.getItemModel(D),w=O.getModel("label"),N=w.get("position")||O.get(["emphasis","label","position"]),be=w.get("distanceToLabelLine"),Le=w.get("alignTo"),xe=V(w.get("edgeDistance"),u),fa=w.get("bleedMargin"),te=O.getModel("labelLine"),H=te.get("length");H=V(H,u);var re=te.get("length2");if(re=V(re,u),Math.abs(L.endAngle-L.startAngle)<i){ee(M.states,v),M.ignore=!0,C&&(ee(C.states,v),C.ignore=!0);return}if(g(M)){var ne=(L.startAngle+L.endAngle)/2,E=Math.cos(ne),$=Math.sin(ne),W,ie,Re,se;e=L.cx,t=L.cy;var U=N==="inside"||N==="inner";if(N==="center")W=L.cx,ie=L.cy,se="center";else{var Se=(U?(L.r+L.r0)/2*E:L.r*E)+e,_e=(U?(L.r+L.r0)/2*$:L.r*$)+t;if(W=Se+E*3,ie=_e+$*3,!U){var Oe=Se+E*(H+c-L.r),Ee=_e+$*(H+c-L.r),Be=Oe+(E<0?-1:1)*re,Ve=Ee;Le==="edge"?W=E<0?s+xe:s+u-xe:W=Be+(E<0?-be:be),ie=Ve,Re=[[Se,_e],[Oe,Ee],[Be,Ve]]}se=U?"center":Le==="edge"?E>0?"right":"left":E>0?"left":"right"}var Z=Math.PI,q=0,K=w.get("rotate");if(ra(K))q=K*(Z/180);else if(N==="center")q=0;else if(K==="radial"||K===!0){var da=E<0?-ne+Z:-ne;q=da}else if(K==="tangential"&&N!=="outside"&&N!=="outer"){var F=Math.atan2(E,$);F<0&&(F=Z*2+F);var ha=$>0;ha&&(F=Z+F),q=F-Z}if(o=!!q,M.x=W,M.y=ie,M.rotation=q,M.setStyle({verticalAlign:"middle"}),U){M.setStyle({align:se});var Me=M.states.select;Me&&(Me.x+=M.x,Me.y+=M.y)}else{var J=M.getBoundingRect().clone();J.applyTransform(M.getComputedTransform());var Ge=(M.style.margin||0)+2.1;J.y-=Ge/2,J.height+=Ge,a.push({label:M,labelLine:C,position:N,len:H,len2:re,minTurnAngle:te.get("minTurnAngle"),maxSurfaceAngle:te.get("maxSurfaceAngle"),surfaceNormal:new P(E,$),linePoints:Re,textAlign:se,labelDistance:be,labelAlignTo:Le,edgeDistance:xe,bleedMargin:fa,rect:J,unconstrainedWidth:J.width,labelStyleWidth:M.style.width})}T.setTextConfig({inside:U})}}),!o&&n.get("avoidLabelOverlap")&&Mt(a,e,t,c,u,f,s,d);for(var h=0;h<a.length;h++){var p=a[h],y=p.label,m=p.labelLine,b=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:p.textAlign}),b&&(ee(y.states,v),y.ignore=!0);var _=y.states.select;_&&(_.x+=y.x,_.y+=y.y)}if(m){var S=p.linePoints;b||!S?(ee(m.states,v),m.ignore=!0):(oa(S,p.minTurnAngle),dt(S,p.surfaceNormal,p.maxSurfaceAngle),m.setShape({points:S}),y.__hostTarget.textGuideLineConfig={anchor:new P(S[0][0],S[0][1])})}}}function ue(n,r,a){var e=n.get("borderRadius");if(e==null)return a?{cornerRadius:0}:null;he(e)||(e=[e,e,e,e]);var t=Math.abs(r.r||0-r.r0||0);return{cornerRadius:Ea(e,function(o){return Ba(o,t)})}}var At=function(n){Ne(r,n);function r(a,e,t){var o=n.call(this)||this;o.z2=2;var i=new Va;return o.setTextContent(i),o.updateData(a,e,t,!0),o}return r.prototype.updateData=function(a,e,t,o){var i=this,l=a.hostModel,c=a.getItemModel(e),u=c.getModel("emphasis"),s=a.getItemLayout(e),d=z(ue(c.getModel("itemStyle"),s,!0),s);if(isNaN(d.startAngle)){i.setShape(d);return}if(o){i.setShape(d);var f=l.getShallow("animationType");l.ecModel.ssr?(ae(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=d.cx,i.originY=d.cy):f==="scale"?(i.shape.r=s.r0,ae(i,{shape:{r:s.r}},l,e)):t!=null?(i.setShape({startAngle:t,endAngle:t}),ae(i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(i.shape.endAngle=s.startAngle,de(i,{shape:{endAngle:s.endAngle}},l,e))}else Ga(i),de(i,{shape:d},l,e);i.useStyle(a.getItemVisual(e,"style")),ka(i,c);var v=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),h=Math.cos(v)*g,p=Math.sin(v)*g,y=c.getShallow("cursor");y&&i.attr("cursor",y),this._updateLabel(l,a,e),i.ensureState("emphasis").shape=z({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},ue(u.getModel("itemStyle"),s)),z(i.ensureState("select"),{x:h,y:p,shape:ue(c.getModel(["select","itemStyle"]),s)}),z(i.ensureState("blur"),{shape:ue(c.getModel(["blur","itemStyle"]),s)});var m=i.getTextGuideLine(),b=i.getTextContent();m&&z(m.ensureState("select"),{x:h,y:p}),z(b.ensureState("select"),{x:h,y:p}),Ya(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},r.prototype._updateLabel=function(a,e,t){var o=this,i=e.getItemModel(t),l=i.getModel("labelLine"),c=e.getItemVisual(t,"style"),u=c&&c.fill,s=c&&c.opacity;$a(o,Xa(i),{labelFetcher:e.hostModel,labelDataIndex:t,inheritColor:u,defaultOpacity:s,defaultText:a.getFormattedLabel(t,"normal")||e.getName(t)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=a.get(["label","position"]);if(f!=="outside"&&f!=="outer")o.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new aa,this.setTextGuideLine(v)),la(this,va(i),{stroke:u,opacity:za(l.get(["lineStyle","opacity"]),s,1)})}},r}(na),Dt=function(n){Ne(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return r.prototype.render=function(a,e,t,o){var i=a.getData(),l=this._data,c=this.group,u;if(!l&&i.count()>0){for(var s=i.getItemLayout(0),d=1;isNaN(s&&s.startAngle)&&d<i.count();++d)s=i.getItemLayout(d);s&&(u=s.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),i.count()===0&&a.get("showEmptyCircle")){var f=new na({shape:ua(a,t)});f.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,c.add(f)}i.diff(l).add(function(v){var g=new At(i,v,u);i.setItemGraphicEl(v,g),c.add(g)}).update(function(v,g){var h=l.getItemGraphicEl(g);h.updateData(i,v,u),h.off("click"),c.add(h),i.setItemGraphicEl(v,h)}).remove(function(v){var g=l.getItemGraphicEl(v);Ua(g,a,v)}).execute(),Tt(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},r.prototype.dispose=function(){},r.prototype.containPoint=function(a,e){var t=e.getData(),o=t.getItemLayout(0);if(o){var i=a[0]-o.cx,l=a[1]-o.cy,c=Math.sqrt(i*i+l*l);return c<=o.r&&c>=o.r0}},r.type="pie",r}(qa);const wt=Dt;function Ct(n,r,a){r=he(r)&&{coordDimensions:r}||z({encodeDefine:n.getEncode()},r);var e=n.getSource(),t=Fa(e,r).dimensions,o=new ja(t,n);return o.initData(e,a),o}var Pt=function(){function n(r,a){this._getDataWithEncodedVisual=r,this._getRawData=a}return n.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},n.prototype.containName=function(r){var a=this._getRawData();return a.indexOfName(r)>=0},n.prototype.indexOfName=function(r){var a=this._getDataWithEncodedVisual();return a.indexOfName(r)},n.prototype.getItemVisual=function(r,a){var e=this._getDataWithEncodedVisual();return e.getItemVisual(r,a)},n}();const It=Pt;var Nt=me(),Rt=function(n){Ne(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.init=function(a){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new It(Fe(this.getData,this),Fe(this.getRawData,this)),this._defaultLabelLine(a)},r.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Ct(this,{coordDimensions:["value"],encodeDefaulter:ia(Ha,this)})},r.prototype.getDataParams=function(a){var e=this.getData(),t=Nt(e),o=t.seats;if(!o){var i=[];e.each(e.mapDimension("value"),function(c){i.push(c)}),o=t.seats=Wa(i,e.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,a);return l.percent=o[a]||0,l.$vars.push("percent"),l},r.prototype._defaultLabelLine=function(a){Za(a,"labelLine",["show"]);var e=a.labelLine,t=a.emphasis.labelLine;e.show=e.show&&a.label.show,t.show=t.show&&a.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(Ka);const Ot=Rt;function Et(n){return{seriesType:n,reset:function(r,a){var e=r.getData();e.filterSelf(function(t){var o=e.mapDimension("value"),i=e.get(o,t);return!(ra(i)&&!isNaN(i)&&i<0)})}}}function $t(n){n.registerChartView(wt),n.registerSeriesModel(Ot),Ja("pie",n.registerAction),n.registerLayout(ia(xt,"pie")),n.registerProcessor(St("pie")),n.registerProcessor(Et("pie"))}export{Gt as B,kt as D,Yt as a,$t as i};
